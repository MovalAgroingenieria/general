<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="credit_control_line_form" model="ir.ui.view">
        <field name="name">credit.control.line.form</field>
        <field name="model">credit.control.line</field>
        <field name="inherit_id" ref="account_credit_control.credit_control_line_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='invoice_id']" position="after">
                <field name="invoice_date"/>
            </xpath>
            <xpath expr="//sheet/group[2]" position="after">
                <group>
                    <group>
                        <field name="tracking_ref"/>
                        <field name="delivered_letter"/>
                        <field name="delivery_date"/>
                    </group>
                    <group>
                        <field name="returned_letter"/>
                        <field name="return_reason"/>
                    </group>
                </group>
                <notebook>
                    <page name="notes" string="Notes">
                        <field name="notes"/>
                    </page>
                </notebook>
            </xpath>
        </field>
    </record>

    <record id="credit_control_line_search" model="ir.ui.view">
        <field name="name">Credit Control Lines</field>
        <field name="model">credit.control.line</field>
        <field name="inherit_id" ref="account_credit_control.credit_control_line_search"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='invoice_id']" position="after">
                <field name="invoice_date"/>
                <field name="tracking_ref"/>
                <field name="delivery_date"/>
            </xpath>
            <xpath expr="//group[@name='filters']" position="inside">
                <separator />
                <filter name="delivered_letter_yes" string="Delivered letter: Yes"
                    domain="[('delivered_letter', '=', True)]"/>
                <filter name="delivered_letter_no" string="Delivered letter: No"
                    domain="[('delivered_letter', '=', False)]"/>
                <separator />
                <filter name="returned_letter_yes" string="Returned letter: Yes"
                    domain="[('returned_letter', '=', True)]"/>
                <filter name="returned_letter_no" string="Returned letter: No"
                    domain="[('returned_letter', '=', No)]"/>
                <separator />
                <filter name="has_notes_yes" string="Has notes"
                    domain="[('has_notes', '=', True)]"/>
            </xpath>
            <xpath expr="//group[@name='group_by']" position="inside">
                <filter string="Invoice date" name="invoice_date"
                    context="{'group_by': 'invoice_date'}"/>
                <filter string="Return reason" name="return_reason"
                     context="{'group_by':'return_reason'}"/>
            </xpath>
        </field>
    </record>

    <record id="credit_control_line_tree" model="ir.ui.view">
        <field name="name">credit.control.line.tree</field>
        <field name="model">credit.control.line</field>
        <field name="inherit_id" ref="account_credit_control.credit_control_line_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                <attribute name="editable"></attribute>
            </xpath>
            <xpath expr="//field[@name='invoice_id']" position="after">
                <field name="invoice_date"/>
            </xpath>
            <xpath expr="//field[@name='manually_overridden']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='manual_followup']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='currency_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='mail_message_id']" position="after">
                <field name="tracking_ref" invisible="1"/>
                <field name="delivered_letter" invisible="1"/>
                <field name="delivery_date" invisible="1"/>
                <field name="returned_letter" invisible="1"/>
                <field name="return_reason" invisible="1"/>
            </xpath>
        </field>
    </record>

    <record id="credit_control_line_pivot" model="ir.ui.view">
        <field name="name">credit.control.line.pivot</field>
        <field name="model">credit.control.line</field>
        <field name="arch" type="xml">
            <pivot string="Credit control lines">
                <field name="account_id" type="row"/>
                <field name="state" type="col"/>
            </pivot>
        </field>
    </record>

    <record model="ir.actions.act_window" id="account_credit_control.credit_control_line_action">
        <field name="view_mode">tree,form,pivot</field>
    </record>

</odoo>
